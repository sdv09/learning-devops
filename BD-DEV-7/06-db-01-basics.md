### Домашнее задание к занятию 1. «Типы и структура СУБД» [Степанников Денис]

---

### Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

1. электронные чеки в json-виде,
2. склады и автомобильные дороги для логистической компании,
3. генеалогические деревья,
4. кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
5. отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Решение:

1. Документоориентированные СУБД, потому что данные будут структурированы в самом json-файле, а не средствами СУБД.
2. Основываясь на формулировке задания, невозможно сделать вывод о необходимости выбора типа СУБД отличного от реляционной, которая является наиболее универсальной. Однако, также возможно использование column-oriented СУБД.
3. Генеалогические СУБД на основе графовой структуры.
4. СУБД типа ключ-значение, потому что простые, быстрые, а ткже поддерживают TTL для записей.
5. Реляционные СУБД так как в описании задачи сказано о наличии отношений (реляций).


### Задача 2
Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

1. данные записываются на все узлы с задержкой до часа (асинхронная запись);
2. при сетевых сбоях система может разделиться на 2 раздельных кластера;
3. система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Решение:

> Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

 В теореме CAP говорится, что система может иметь только два из трех свойств:
 1. Согласованность (Consistency)
 2. Доступность (Availability)
 3. Устойчивость к разделению (Partition tolerance).

  > Согласно PACELC-теореме как бы вы классифицировали эти реализации?

  > - данные записываются на все узлы с задержкой до часа (асинхронная запись);

- **Согласованность (Consistency)**. скорее всего нет, из-за асинхронности (при сбое данные запрошенные с разных узлов могут различаться).
- **Доступность  (Availability)**. Высокая доступность, так как существует несколько узлов и система готова принимать запросы даже при задержке записи. Отвечать система также будет пока доступен хотя бы один из узлов.
- **Устойчивость к разделению (Partition tolerance)**. Такая система устойчива к разделению сети, потому что запись выполняется на все узлы и отдельные узлы могут быть временно недоступны без влияния на другие. При разделении система продолжит работу, хотя возвращаемые пользователям данные могут быть разными.

*Классификация по CAP:* **AР**

*Классификация по PACELS:* **PA/EL**

> - при сетевых сбоях система может разделиться на 2 раздельных кластера;

- **Согласованность (Consistency)**. В случае разделения на два кластера, согласованность страдает, так как разные кластеры вероятнее всего будут работать независимо, что приведет к несогласованности данных.
- **Доступность  (Availability)**. Не смотря на разделение на два кластера каждый из них остается доступным.
- **Устойчивость к разделению (Partition tolerance)**. При сбое система разделяется на два кластера, каждый их которых работает независимо, т.е. при разделении система продолжит работу, хотя возвращаемые пользователям данные и могут быть разными.

*Классификация по CAP*: **AP**

*Классификация по PACELS:* **PA/EC**

> - система может не прислать корректный ответ или сбросить соединение.

- **Согласованность (Consistency)**. Недостаточно данных, чтобы делать выводы о согласованности данных в такой системе. Будем считать, что система удовлетворяет требованиям согласованности.
- **Доступность  (Availability)**. Отсутствие ответа от системы или сброс соединения можно считать недоступностью.
- **Устойчивость к разделению (Partition tolerance)**. Недостаточно данных, чтобы точно сказать про устойчивость системы к разделению. Будем считать, что система удовлетворяет требованиям устойчивости к разделению.

*Классификация по CAP*: согласно теореме CAP распределенная система может обладать только двумя их трех свойств, доплнительно можно предположить, что не выполняются только требования к доступности,  значит система относится к классу **CP**.

*Классификация по PACELS:* **PC/EL**

### Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Решение:

Если учесть, что подходы ACID и BASE описывают различные/противоположные по назначению модели обработки и хранения данных в СУБД, то в реальных же системах может возникнуть ситуация, когда некоторые части системы следуют ACID, обеспечивая высокую консистентность данных, другие же части могут придерживаться BASE, что гарантирует высокую доступность и устойчивость системы. Это очень характерно для распределенных систем, где могут возникать задержки и асинхронное согласование данных между узлами.

### Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:
 - фиксация некоторых значений с временем жизни,
 - реакция на истечение таймаута.
 
Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?

### Решение:

**Pub/Sub** - это механизм взаимодействия между компонентами системы, где отправители вместо прямого отправления сообщений получателям, публикуют их в определенные "темы" или "каналы", а получатели подписываются на них и автоматически получают сообщения, опубликованные в этих "темах" или "каналах".

**Плюсы Pub/Sub:**
1. **Легкость интеграции и масштабируемость** - простое добавление новых подписчиков или изменение "тем", "каналов" без каких-либо изменений на публикующей стороне.
2. **Разделение функционала** - публикаторы и подписчики могут работать независимо, что упрощает архитектуру системы.
3. **Асинхронность** - позволяет обрабатывать сообщения асинхронно, улучшая производительность.

**Минусы Pub/Sub:**
1. **Сложность обработки ошибок** - если подписчик не может обработать сообщение, необходимы механизмы повторной обработки или управления ошибками.
2. **Сложность мониторинга** - отслеживание того, какие сообщения отправляются и принимаются, здес потребуются дополнительные инструменты для мониторинга.
3. **Сложность восстановления после сбоев** - в распределенных системах могут возникнуть сложности в восстановлении после сбоев или в случае переупорядочивания сообщений.